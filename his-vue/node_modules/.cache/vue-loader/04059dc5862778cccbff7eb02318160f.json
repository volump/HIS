{"remainingRequest":"E:\\大三\\大三_上\\数据库课程\\数据库\\数据库期末答辩\\datebaseFinal\\his-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\大三\\大三_上\\数据库课程\\数据库\\数据库期末答辩\\datebaseFinal\\his-vue\\src\\components\\constant-item\\edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\大三\\大三_上\\数据库课程\\数据库\\数据库期末答辩\\datebaseFinal\\his-vue\\src\\components\\constant-item\\edit.vue","mtime":1601001436000},{"path":"E:\\大三\\大三_上\\数据库课程\\数据库\\数据库期末答辩\\datebaseFinal\\his-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\大三\\大三_上\\数据库课程\\数据库\\数据库期末答辩\\datebaseFinal\\his-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\大三\\大三_上\\数据库课程\\数据库\\数据库期末答辩\\datebaseFinal\\his-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\大三\\大三_上\\数据库课程\\数据库\\数据库期末答辩\\datebaseFinal\\his-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb25zdGFudEl0ZW1FZGl0JywKICBwcm9wczogWydlZGl0aWQnXSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICB0eXBlSWQ6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGNvZGU6ICcnLAogICAgICAgIHNvcnQ6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgY29kZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+e8lueggeS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgeyBtaW46IDEsIG1heDogMTAwLCBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDEg5YiwIDEwMCDkuKrlrZfnrKYnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgbmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+exu+WIq+WQjeS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgeyBtaW46IDEsIG1heDogMTAwLCBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDEg5YiwIDEwMCDkuKrlrZfnrKYnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKFsnY29uc3RhbnRUeXBlcyddKQogIH0sCiAgY3JlYXRlZCAoKSB7CiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ2V0Q29uc3RhbnRUeXBlcycpCiAgICBpZiAodGhpcy5lZGl0aWQpIHsKICAgICAgLy8g6YCa6L+HaWQg6K+75Y6f5aeL5pWw5o2uCiAgICAgIHRoaXMuJGF4aW9zLmdldChgL2NvbnN0YW50SXRlbXMvJHt0aGlzLmVkaXRpZH1gLCByZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5mb3JtLnR5cGVJZCA9IFN0cmluZyhyZXNwb25zZS5kYXRhLnR5cGVJZCkKICAgICAgICB0aGlzLmZvcm0uY29kZSA9IHJlc3BvbnNlLmRhdGEuY29kZQogICAgICAgIHRoaXMuZm9ybS5uYW1lID0gcmVzcG9uc2UuZGF0YS5uYW1lCiAgICAgICAgdGhpcy5mb3JtLnNvcnQgPSByZXNwb25zZS5kYXRhLnNvcnQKICAgICAgfSkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNhdmUgKCkgewogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICghdmFsaWQpIHJldHVybgogICAgICAgIGlmICh0aGlzLmVkaXRpZCkgewogICAgICAgICAgdGhpcy4kYXhpb3MucHV0KGAvY29uc3RhbnRJdGVtcy8ke3RoaXMuZWRpdGlkfWAsIHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgLy8g5a2Q57uE5Lu26KaB5pS55Y+Y54i257uE5Lu255qE5YC8CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpzaG93JywgZmFsc2UpCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2dldERhdGEnKQogICAgICAgICAgfSwgdGhpcy5mb3JtKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCcvY29uc3RhbnRJdGVtcycsIHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgLy8g5a2Q57uE5Lu26KaB5pS55Y+Y54i257uE5Lu255qE5YC8CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpzaG93JywgZmFsc2UpCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2dldERhdGEnKQogICAgICAgICAgfSwgdGhpcy5mb3JtKQogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/components/constant-item","sourcesContent":["<template>\n  <div>\n    <el-form ref=\"form\" :rules=\"rules\" :model=\"form\" label-width=\"120px\">\n      <el-form-item label=\"常数类别\" prop=\"typeId\">\n        <el-select v-model=\"form.typeId\" placeholder=\"常数类别\">\n          <el-option v-for=\"(item, id) in constantTypes\"\n          :key=\"id\"\n          :label=\"item.name\"\n          :value=\"id\">\n          </el-option>\n        </el-select>\n\n      </el-form-item>\n\n      <el-form-item label=\"常数项代码\" prop=\"code\">\n        <el-input v-model=\"form.code\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"常数项名称\" prop=\"name\">\n        <el-input v-model=\"form.name\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"排序序号\" prop=\"sort\">\n        <el-input v-model=\"form.sort\"></el-input>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" plain @click=\"save\">保存数据</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nexport default {\n  name: 'ConstantItemEdit',\n  props: ['editid'],\n  data () {\n    return {\n      form: {\n        typeId: '',\n        name: '',\n        code: '',\n        sort: ''\n      },\n      rules: {\n        code: [\n          { required: true, message: '编码不能为空', trigger: 'blur' },\n          { min: 1, max: 100, message: '长度在 1 到 100 个字符', trigger: 'blur' }\n        ],\n        name: [\n          { required: true, message: '类别名不能为空', trigger: 'blur' },\n          { min: 1, max: 100, message: '长度在 1 到 100 个字符', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  computed: {\n    ...mapState(['constantTypes'])\n  },\n  created () {\n    this.$store.dispatch('getConstantTypes')\n    if (this.editid) {\n      // 通过id 读原始数据\n      this.$axios.get(`/constantItems/${this.editid}`, response => {\n        this.form.typeId = String(response.data.typeId)\n        this.form.code = response.data.code\n        this.form.name = response.data.name\n        this.form.sort = response.data.sort\n      })\n    }\n  },\n  methods: {\n    save () {\n      this.$refs.form.validate(valid => {\n        if (!valid) return\n        if (this.editid) {\n          this.$axios.put(`/constantItems/${this.editid}`, response => {\n            // 子组件要改变父组件的值\n            this.$emit('update:show', false)\n            this.$emit('getData')\n          }, this.form)\n        } else {\n          this.$axios.post('/constantItems', response => {\n            // 子组件要改变父组件的值\n            this.$emit('update:show', false)\n            this.$emit('getData')\n          }, this.form)\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n"]}]}