{"remainingRequest":"D:\\idea_2019\\AllProject\\SpringBoot\\vue医院管理系统\\his\\his-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\idea_2019\\AllProject\\SpringBoot\\vue医院管理系统\\his\\his-vue\\src\\views\\register\\index.vue?vue&type=style&index=0&id=022fc800&scoped=true&lang=css&","dependencies":[{"path":"D:\\idea_2019\\AllProject\\SpringBoot\\vue医院管理系统\\his\\his-vue\\src\\views\\register\\index.vue","mtime":1601001435000},{"path":"D:\\idea_2019\\AllProject\\SpringBoot\\vue医院管理系统\\his\\his-vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\idea_2019\\AllProject\\SpringBoot\\vue医院管理系统\\his\\his-vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\idea_2019\\AllProject\\SpringBoot\\vue医院管理系统\\his\\his-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\idea_2019\\AllProject\\SpringBoot\\vue医院管理系统\\his\\his-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\idea_2019\\AllProject\\SpringBoot\\vue医院管理系统\\his\\his-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVsLXNlbGVjdC1kcm9wZG93biB7CiAgdG9wOiAzOHB4ICFpbXBvcnRhbnQ7CiAgbGVmdDogMCAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwNA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/register","sourcesContent":["<template>\n  <div>\n    <Breadcrumb msg1=\"挂号收费\" msg2=\"添加挂号\" />\n    <!-- 卡片视图区域 -->\n    <el-card>\n      <!-- 提示区域 -->\n      <el-alert title=\"添加挂号信息\" type=\"info\" center show-icon :closable=\"false\"></el-alert>\n      <el-steps :active=\"parseInt(activeIndex)\" finish-status=\"success\">\n        <el-step title=\"用户信息\"></el-step>\n        <el-step title=\"病例情况\"></el-step>\n        <el-step title=\"挂号信息\"></el-step>\n      </el-steps>\n\n      <el-form :model=\"form\" :rules=\"rules\" ref=\"formRef\" label-width=\"110px\" label-position=\"left\">\n        <el-tabs\n          v-model=\"activeIndex\"\n          :tab-position=\"'left'\"\n        >\n          <el-tab-pane label=\"用户信息\" name=\"0\">\n            <el-form-item label=\"姓名\" prop=\"name\">\n              <el-input v-model=\"form.name\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"性别\">\n              <el-radio-group v-model=\"form.gender\">\n                <el-radio :label=\"0\">男</el-radio>\n                <el-radio :label=\"1\">女</el-radio>\n              </el-radio-group>\n            </el-form-item>\n            <el-form-item label=\"身份证号\" prop=\"idno\">\n              <el-input v-model=\"form.idno\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"出生日期\" prop=\"birth\">\n              <el-date-picker\n                v-model=\"form.birthday\"\n                type=\"date\"\n                placeholder=\"选择日期\"\n                value-format=\"yyyy-MM-dd\"\n              ></el-date-picker>\n            </el-form-item>\n            <el-form-item label=\"年龄\">\n              <el-input v-model=\"form.age\" type=\"number\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"地址\" prop=\"address\">\n              <el-input v-model=\"form.address\"></el-input>\n            </el-form-item>\n          </el-tab-pane>\n\n          <el-tab-pane label=\"病例情况\" name=\"1\">\n            <el-form-item label=\"健康描述\" prop=\"readme\">\n              <el-input v-model=\"form.readme\" type=\"textarea\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"现病史\">\n              <el-input v-model=\"form.present\" type=\"textarea\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"现病史治疗情况\">\n              <el-input v-model=\"form.presentTreat\" type=\"textarea\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"既往史\">\n              <el-input v-model=\"form.history\" type=\"textarea\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"过敏史\">\n              <el-input v-model=\"form.allergy\" type=\"textarea\"></el-input>\n            </el-form-item>\n          </el-tab-pane>\n\n          <el-tab-pane label=\"挂号信息\" name=\"2\">\n            <el-form-item label=\"挂号级别\">\n              <el-select v-model=\"form.regsitLevelId\" placeholder=\"请选择\" :popper-append-to-body=\"false\" @change=\"fee\">\n                <el-option\n                  v-for=\"(value, id) in register\"\n                  :key=\"id\"\n                  :label=\"value.name\"\n                  :value=\"id\">\n                </el-option>\n              </el-select>\n            </el-form-item>\n\n            <el-form-item label=\"挂号科室\" >\n              <el-select v-model=\"form.deptId\" placeholder=\"请选择\" :popper-append-to-body=\"false\" @change=\"doctor={}\">\n                <el-option\n                  v-for=\"(value, id) in department\"\n                  :key=\"id\"\n                  :label=\"value.name\"\n                  :value=\"id\">\n                </el-option>\n              </el-select>\n            </el-form-item>\n\n            <el-form-item label=\"看诊医生\">\n              <el-select v-model=\"form.doctorId\" placeholder=\"请选择\" :popper-append-to-body=\"false\" @focus=\"getDoctor\">\n                <el-option\n                  v-for=\"(value, id) in doctor\"\n                  :key=\"id\"\n                  :label=\"value.name\"\n                  :value=\"id\">\n                </el-option>\n              </el-select>\n            </el-form-item>\n\n            <el-form-item label=\"是否要病历本\" prop=\"book\">\n              <el-radio-group v-model=\"form.book\" @change=\"fee\">\n                <el-radio-button :label=\"0\">否</el-radio-button>\n                <el-radio-button :label=\"1\">是</el-radio-button>\n              </el-radio-group>\n            </el-form-item>\n\n            <el-form-item label=\"应收金额\" prop=\"fee\">\n              <el-input v-model=\"form.fee\" disabled></el-input>\n            </el-form-item>\n\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"save\">立即创建</el-button>\n            </el-form-item>\n          </el-tab-pane>\n        </el-tabs>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport Breadcrumb from '@/components/Breadcrumb'\nexport default {\n  components: {\n    Breadcrumb\n  },\n  data () {\n    var checkId = (rule, value, cb) => {\n      const reg = /^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|31)|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}([0-9]|x|X)$/\n      if (reg.test(value)) {\n        return cb()\n      }\n      cb(new Error('请输入合法的身份证号'))\n    }\n    return {\n      activeIndex: 0,\n      form: {\n        name: '李白',\n        gender: 0,\n        idno: '110101199003079550',\n        birthday: '1990-03-07',\n        age: 30,\n        address: '北京市-东城区',\n        regsitLevelId: null,\n        deptId: null,\n        doctorId: null,\n        book: 0,\n        fee: 0,\n        readme: '体检',\n        present: '无',\n        presentTreat: '无',\n        history: '无',\n        allergy: '无',\n        status: 1\n      },\n      rules: {\n        name: [\n          { required: true, message: '请输入用户名', trigger: 'blur' }\n        ],\n        idno: [\n          { required: true, message: '请输入身份证号码', trigger: 'blur' },\n          { validator: checkId, trigger: 'blur' }\n        ],\n        address: [\n          { required: true, message: '请输入用户名', trigger: 'blur' }\n        ],\n        readme: [\n          { required: true, message: '请输入身份证号码', trigger: 'blur' }\n        ]\n      },\n      doctor: {}\n    }\n  },\n  mounted () {\n    this.$store.dispatch('getRegisterLevel')\n    this.$store.dispatch('getDepartment')\n  },\n  computed: {\n    ...mapState(['register', 'department'])\n  },\n  methods: {\n    fee () {\n      if (this.form.regsitLevelId) {\n        this.form.fee = this.register[this.form.regsitLevelId].fee\n        if (this.form.book === 1) {\n          this.form.fee += 5\n        }\n        this.doctor = {}\n      }\n    },\n    save () {\n      this.$refs.formRef.validate(valid => {\n        this.$axios.post('/registers', () => {}, this.form)\n      })\n    },\n    getDoctor () {\n      if (Object.keys(this.doctor).length !== 0) return\n      if (this.form.regsitLevelId && this.form.deptId) {\n        this.$axios.http.get('/users/list', {\n          params: {\n            active: 1,\n            user_type: this.register[this.form.regsitLevelId].roleId,\n            dept_id: this.form.deptId\n          }\n        }).then(response => {\n          this.doctor = response.data.data\n        })\n      } else {\n        this.$message.error('请先选择挂号级别和科室')\n      }\n    }\n  }\n}\n</script>\n<style scoped>\n.el-select-dropdown {\n  top: 38px !important;\n  left: 0 !important;\n}\n</style>\n"]}]}